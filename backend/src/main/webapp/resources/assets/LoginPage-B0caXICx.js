import{r as u,o as k,c as r,a as o,b as m,w as p,v,d as S,t as i,F as w,e as d}from"./index-A82AYEoU.js";import{a as y}from"./index-Dq7h7Pqt.js";const x={key:0},L={key:1},N={__name:"LoginPage",setup(b){const s=u(!1),n=u({}),t=u({username:"",password:""}),g=async()=>{try{const l=await y.post("/api/auth/login",t.value);console.log(l.data);const{token:e,user:a}=l.data;localStorage.setItem("authToken",e),localStorage.setItem("userInfo",JSON.stringify(a)),s.value=!0,t.value={username:"",password:""}}catch{}},f=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userInfo"),s.value=!1},I=()=>{const l=localStorage.getItem("authToken"),e=localStorage.getItem("userInfo");l&&e?(s.value=!0,n.value=JSON.parse(e)):(s.value=!1,n.value={})};return k(()=>{I()}),(l,e)=>(d(),r(w,null,[e[7]||(e[7]=o("h1",null,"Login 테스트",-1)),s.value?(d(),r("div",L,[e[5]||(e[5]=o("hr",null,null,-1)),e[6]||(e[6]=o("h1",null,"환영합니다",-1)),o("p",null,[o("strong",null,"사용자명: "+i(n.value.username),1)]),o("p",null,[o("strong",null,"이메일: "+i(n.value.email),1)]),o("p",null,[o("strong",null,"권한: "+i(n.value.roles),1)]),o("button",{onClick:f},"로그 아웃")])):(d(),r("div",x,[o("form",{onSubmit:S(g,["prevent"])},[o("div",null,[e[2]||(e[2]=m(" username : ")),p(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>t.value.username=a)},null,512),[[v,t.value.username]])]),o("div",null,[e[3]||(e[3]=m(" password : ")),p(o("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=a=>t.value.password=a)},null,512),[[v,t.value.password]])]),e[4]||(e[4]=o("div",null,[o("button",{type:"submit"},"로그인")],-1))],32)]))],64))}};export{N as default};
