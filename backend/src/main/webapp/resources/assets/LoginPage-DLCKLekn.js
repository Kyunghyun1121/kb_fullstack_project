import{d as w,r as h,c as u,a as y,b as p,e as t,f as n,g as k,w as f,v,t as S,h as x,u as _,o as g}from"./index-wDOg0MY1.js";import{a as N}from"./index-Dq7h7Pqt.js";const b={token:"",user:{username:"",email:"",roles:[]}},V=w("auth",()=>{const s=h({...b}),i=u(()=>!!s.value.user.username),c=u(()=>s.value.user.username),a=u(()=>s.value.user.email),o=async e=>{s.value.token="test token",s.value.user={username:e.username,email:e.username+"@test.com"};const{data:l}=await N.post("/api/auth/login",e);s.value={...l},localStorage.setItem("auth",JSON.stringify(s.value))},d=()=>{localStorage.clear(),s.value={...b}},m=()=>s.value.token;return(()=>{const e=localStorage.getItem("auth");e!=null&&(s.value=JSON.parse(e),console.log(s.value))})(),{state:s,username:c,email:a,isLogin:i,login:o,logout:d,getToken:m}}),D={class:"mt-5 mx-auto",style:{width:"500px"}},I={class:"mb-3 mt-3"},B={class:"mb-3"},T={key:0,class:"text-danger"},J=["disabled"],O={__name:"LoginPage",setup(s){const i=_(),c=V(),a=y({username:"",password:""}),o=h(""),d=u(()=>!(a.username&&a.password)),m=async()=>{console.log(a);try{await c.login(a),i.push("/")}catch(r){console.log("에러=======",r),o.value=r.response.data}};return(r,e)=>(g(),p("div",D,[e[5]||(e[5]=t("h1",{class:"my-5"},[t("i",{class:"fa-solid fa-right-to-bracket"}),n(" 로그인 ")],-1)),t("form",{onSubmit:x(m,["prevent"])},[t("div",I,[e[2]||(e[2]=t("label",{for:"username",class:"form-label"},[t("i",{class:"fa-solid fa-user"}),n(" 사용자 ID: ")],-1)),f(t("input",{type:"text",class:"form-control",placeholder:"사용자 ID","onUpdate:modelValue":e[0]||(e[0]=l=>a.username=l)},null,512),[[v,a.username]])]),t("div",B,[e[3]||(e[3]=t("label",{for:"password",class:"form-label"},[t("i",{class:"fa-solid fa-lock"}),n(" 비밀번호: ")],-1)),f(t("input",{type:"password",class:"form-control",placeholder:"비밀번호","onUpdate:modelValue":e[1]||(e[1]=l=>a.password=l)},null,512),[[v,a.password]])]),o.value?(g(),p("div",T,S(o.value),1)):k("",!0),t("button",{type:"submit",class:"btn btn-primary mt-4",disabled:d.value},e[4]||(e[4]=[t("i",{class:"fa-solid fa-right-to-bracket"},null,-1),n(" 로그인 ")]),8,J)],32)]))}};export{O as default};
